{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["export function openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", handleEscapeKey);\r\n}\r\n\r\nexport function closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n}\r\n\r\nfunction handleEscapeKey(event) {\r\n  if (event.key === \"Escape\") {\r\n    const openPopups = document.querySelectorAll(\".popup_is-opened\");\r\n    openPopups.forEach(popup => closeModal(popup));\r\n  }\r\n}","const cohortId = \"wff-cohort-37\";\r\nconst token = \"fde443f4-e1c0-4be8-9027-f230183aa3f5\";\r\nconst baseUrl = `https://nomoreparties.co/v1/${cohortId}`;\r\n\r\nfunction request(path, method = \"GET\", body = null) {\r\n  const headers = {\r\n    authorization: token,\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n\r\n  const options = {\r\n    method,\r\n    headers,\r\n    ...(body && { body: JSON.stringify(body) }),\r\n  };\r\n\r\n  return fetch(`${baseUrl}/${path}`, options).then((res) => {\r\n    if (!res.ok) {\r\n      return res.json().then((err) => {\r\n        const error = new Error(`Ошибка ${res.status}`);\r\n        error.details = err;\r\n        throw error;\r\n      });\r\n    }\r\n    return res.json();\r\n  });\r\n}\r\n\r\nexport function getUserInfo() {\r\n  return request(\"users/me\");\r\n}\r\n\r\nexport function getCards() {\r\n  return request(\"cards\");\r\n}\r\n\r\nexport function addCard(name, link) {\r\n  return request(\"cards\", \"POST\", { name, link });\r\n}\r\n\r\nexport function deleteCard(cardId) {\r\n  return request(`cards/${cardId}`, \"DELETE\");\r\n}\r\n\r\nexport function likeCard(cardId) {\r\n  return request(`cards/likes/${cardId}`, \"PUT\");\r\n}\r\n\r\nexport function unlikeCard(cardId) {\r\n  return request(`cards/likes/${cardId}`, \"DELETE\");\r\n}\r\n\r\nexport function updateUserInfo(name, about) {\r\n  return request(\"users/me\", \"PATCH\", { name, about });\r\n}\r\n\r\nexport function updateUserAvatar(avatarLink) {\r\n  return request(\"users/me/avatar\", \"PATCH\", { avatar: avatarLink });\r\n}\r\n\r\nexport function loadUserDataAndCards() {\r\n  return Promise.all([getUserInfo(), getCards()])\r\n    .then(([userInfo, cards]) => {\r\n      return { userInfo, cards };\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при загрузке данных:\", err);\r\n    });\r\n}\r\n","import { openModal } from \"./modal\";\r\nimport * as api from \"./api\";\r\n\r\nconst confirmDeleteCardPopup = document.querySelector(\r\n  \".popup_type_delete-card\"\r\n);\r\nconst confirmDeleteButton =\r\n  confirmDeleteCardPopup.querySelector(\".popup__button\");\r\nconst confirmDeleteForm = document.forms[\"delete-form\"];\r\nlet cardElementToDelete;\r\n\r\nexport function createCard(\r\n  data,\r\n  handleLike,\r\n  handleDelete,\r\n  handleImageClick,\r\n  userId\r\n) {\r\n  const cardTemplate = document.getElementById(\"card-template\").content;\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const imgElement = cardElement.querySelector(\".card__image\");\r\n  const titleElement = cardElement.querySelector(\".card__title\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const likeElement = cardElement.querySelector(\".card__like-button\");\r\n  const likeCount = cardElement.querySelector(\".like-count-text\");\r\n\r\n  likeCount.textContent = data.likes.length;\r\n\r\n  imgElement.src = data.link;\r\n  imgElement.alt = data.name;\r\n  titleElement.textContent = data.name;\r\n  cardElement.dataset.id = data._id;\r\n\r\n  if (data.likes.some((like) => like._id === userId)) {\r\n    likeElement.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  if (data.owner._id !== userId) {\r\n    deleteButton.style.display = \"none\";\r\n  } else {\r\n    deleteButton.style.display = \"block\";\r\n  }\r\n\r\n  imgElement.addEventListener(\"click\", () =>\r\n    handleImageClick(data.link, data.name)\r\n  );\r\n\r\n  deleteButton.addEventListener(\"click\", () => {\r\n    cardElementToDelete = cardElement;\r\n    handleDelete();\r\n  });\r\n\r\n  likeElement.addEventListener(\"click\", (event) =>\r\n    handleLike(event, likeCount, data.likes.length)\r\n  );\r\n\r\n  return cardElement;\r\n}\r\n\r\nexport function handleLikeButtonClick(event, likeCount) {\r\n  const cardId = event.target.closest(\".places__item\").dataset.id;\r\n  const isLiked = event.target.classList.contains(\r\n    \"card__like-button_is-active\"\r\n  );\r\n\r\n  if (isLiked) {\r\n    api\r\n      .unlikeCard(cardId)\r\n      .then((updatedCard) => {\r\n        event.target.classList.remove(\"card__like-button_is-active\");\r\n        likeCount.textContent = updatedCard.likes.length;\r\n      })\r\n      .catch((err) => console.error(\"Ошибка при удалении лайка:\", err));\r\n  } else {\r\n    api\r\n      .likeCard(cardId)\r\n      .then((updatedCard) => {\r\n        event.target.classList.add(\"card__like-button_is-active\");\r\n        likeCount.textContent = updatedCard.likes.length;\r\n      })\r\n      .catch((err) => console.error(\"Ошибка при добавлении лайка:\", err));\r\n  }\r\n}\r\n\r\nexport function handleDeleteCard() {\r\n  openModal(confirmDeleteCardPopup);\r\n}\r\n\r\nconfirmDeleteForm.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  if (cardElementToDelete) {\r\n    confirmDeleteButton.textContent = \"Удаляем...\";\r\n    const cardId = cardElementToDelete.dataset.id;\r\n    api\r\n      .deleteCard(cardId)\r\n      .then(() => {\r\n        cardElementToDelete.remove();\r\n        cardElementToDelete = null;\r\n        confirmDeleteCardPopup.classList.remove(\"popup_is-opened\");\r\n      })\r\n      .catch((err) => console.error(\"Ошибка при удалении карточки:\", err))\r\n      .finally(() => {\r\n        confirmDeleteButton.textContent = \"Да\";\r\n      });\r\n  }\r\n});\r\n","function toggleInputError(formElement, inputElement, errorMessage = '') {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  if (errorMessage) {\r\n    inputElement.classList.add('form__input_type_error');\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add('form__input-error_active');\r\n  } else {\r\n    inputElement.classList.remove('form__input_type_error');\r\n    errorElement.classList.remove('form__input-error_active');\r\n    errorElement.textContent = '';\r\n  }\r\n}\r\n\r\nexport function showInputError(formElement, inputElement, errorMessage) {\r\n  toggleInputError(formElement, inputElement, errorMessage);\r\n}\r\n\r\nexport function hideInputError(formElement, inputElement) {\r\n  toggleInputError(formElement, inputElement);\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n}\r\n\r\nexport function toggleButtonState(inputList, buttonElement) {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.classList.add(\"button_inactive\");\r\n  } else {\r\n    buttonElement.classList.remove(\"button_inactive\");\r\n  }\r\n}\r\n\r\nexport function clearValidation(formElement, validationConfig) {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  inputList.forEach(inputElement => {\r\n    hideInputError(formElement, inputElement);\r\n  });\r\n}\r\n\r\nfunction checkInputValidity(formElement, inputElement) {\r\n  const isValid = inputElement.validity.valid && \r\n  (!inputElement.pattern || new RegExp(inputElement.pattern).test(inputElement.value));\r\n  \r\n  if (!isValid) {\r\n    const errorMessage = inputElement.validationMessage || inputElement.dataset.errorMessage;\r\n    showInputError(formElement, inputElement, errorMessage);\r\n  } else {\r\n    hideInputError(formElement, inputElement);\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement) {\r\n  const inputList = Array.from(formElement.querySelectorAll('.popup__input'));\r\n  const buttonElement = formElement.querySelector(\".popup__button\");\r\n  toggleButtonState(inputList, buttonElement);\r\n  \r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener('input', function () {\r\n      checkInputValidity(formElement, inputElement);\r\n      toggleButtonState(inputList, buttonElement);\r\n    });\r\n  });\r\n}\r\n\r\nexport function enableValidation() {\r\n  const formList = Array.from(document.querySelectorAll('.popup__form'));\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener('submit', function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    setEventListeners(formElement);\r\n  });\r\n}\r\n","import \"../pages/index.css\";\r\nimport {\r\n  createCard,\r\n  handleLikeButtonClick,\r\n  handleDeleteCard,\r\n} from \"../components/card\";\r\nimport { openModal, closeModal } from \"../components/modal\";\r\nimport { enableValidation, clearValidation } from \"../components/validation\";\r\nimport * as api from \"../components/api.js\";\r\n\r\nconst placesContainer = document.querySelector(\".places__list\");\r\nconst addCardPopup = document.querySelector(\".popup_type_new-card\");\r\nconst editPopup = document.querySelector(\".popup_type_edit\");\r\nconst changeAvatarPopup = document.querySelector(\".popup_type_avatar\");\r\nconst cardPopup = document.querySelector(\".popup_type_image\");\r\nconst popupImage = cardPopup.querySelector(\".popup__image\");\r\nconst popupCaption = cardPopup.querySelector(\".popup__caption\");\r\nconst modals = document.querySelectorAll(\".popup\");\r\n\r\nconst addButton = document.querySelector(\".profile__add-button\");\r\nconst editButton = document.querySelector(\".profile__edit-button\");\r\nconst formEditButton = editPopup.querySelector(\".popup__button\");\r\nconst avatar = document.querySelector(\".profile__image\");\r\nconst changeAvatarButton = changeAvatarPopup.querySelector(\".popup__button\");\r\nconst createCardButton = addCardPopup.querySelector(\".popup__button\");\r\n\r\nconst changeAvatarForm = document.forms[\"avatar\"];\r\nconst editProfileForm = document.forms[\"edit-profile\"];\r\nconst newPlaceForm = document.forms[\"new-place\"];\r\nconst placeNameInput = newPlaceForm.elements[\"place-name\"];\r\nconst linkInput = newPlaceForm.elements[\"link\"];\r\nconst nameInput = editProfileForm.elements[\"name\"];\r\nconst descriptionInput = editProfileForm.elements[\"about\"];\r\nconst avatarLinkInput = changeAvatarPopup.querySelector(\"#avatar-link\");\r\n\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\n\r\napi\r\n  .loadUserDataAndCards()\r\n  .then(({ userInfo, cards }) => {\r\n    avatar.style.backgroundImage = `url(${userInfo.avatar})`;\r\n\r\n    updateProfile({ name: userInfo.name, about: userInfo.about });\r\n\r\n    cards.forEach((card) => {\r\n      const cardElement = createCard(\r\n        card,\r\n        handleLikeButtonClick,\r\n        handleDeleteCard,\r\n        createCardPopup,\r\n        userInfo._id\r\n      );\r\n      renderCard(cardElement);\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.error(\"Ошибка при загрузке карточек:\", err);\r\n  });\r\n\r\nchangeAvatarForm.addEventListener(\"submit\", () => {\r\n  changeAvatarButton.textContent = \"Сохраняем...\";\r\n  const newAvatarLink = avatarLinkInput.value;\r\n  api\r\n    .updateUserAvatar(newAvatarLink)\r\n    .then(() => {\r\n      avatar.style.backgroundImage = `url(${newAvatarLink})`;\r\n      closeModal(changeAvatarPopup);\r\n      avatarLinkInput.value = \"\";\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при обновлении аватара:\", err);\r\n    })\r\n    .finally(() => {\r\n      changeAvatarButton.textContent = \"Сохранить\";\r\n    });\r\n});\r\n\r\navatar.addEventListener(\"click\", () => {\r\n  openModal(changeAvatarPopup);\r\n});\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nenableValidation(validationConfig);\r\n\r\nmodals.forEach((modal) => {\r\n  modal.classList.add(\"popup_is-animated\");\r\n  modal.addEventListener(\"click\", handleModalClose);\r\n});\r\n\r\nfunction createCardPopup(imageSrc, title) {\r\n  popupImage.src = imageSrc;\r\n  popupImage.alt = title;\r\n  popupCaption.textContent = title;\r\n  openModal(cardPopup);\r\n}\r\n\r\nfunction renderCard(cardElement) {\r\n  placesContainer.appendChild(cardElement);\r\n}\r\n\r\naddButton.addEventListener(\"click\", () => {\r\n  newPlaceForm.reset();\r\n  clearValidation(newPlaceForm, validationConfig);\r\n  openModal(addCardPopup);\r\n});\r\n\r\nfunction handleModalClose(event) {\r\n  const popup = event.target.closest(\".popup\");\r\n  if (\r\n    popup &&\r\n    (event.target.classList.contains(\"popup__close\") || event.target === popup)\r\n  ) {\r\n    closeModal(popup);\r\n  }\r\n}\r\n\r\nnewPlaceForm.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  createCardButton.textContent = \"Сохраняем...\";\r\n  const newCard = {\r\n    name: placeNameInput.value,\r\n    link: linkInput.value,\r\n  };\r\n\r\n  api\r\n    .addCard(newCard.name, newCard.link)\r\n    .then((card) => {\r\n      const cardElement = createCard(\r\n        card,\r\n        handleLikeButtonClick,\r\n        handleDeleteCard,\r\n        createCardPopup,\r\n        card.owner._id\r\n      );\r\n      placesContainer.prepend(cardElement);\r\n      closeModal(addCardPopup);\r\n      newPlaceForm.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при добавлении карточки:\", err);\r\n    })\r\n    .finally(() => {\r\n      createCardButton.textContent = \"Сохранить\";\r\n    });\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  nameInput.value = profileTitle.textContent;\r\n  descriptionInput.value = profileDescription.textContent;\r\n  clearValidation(editProfileForm, validationConfig);\r\n  openModal(editPopup);\r\n});\r\n\r\nfunction updateProfile({ name, about }) {\r\n  profileTitle.textContent = name;\r\n  profileDescription.textContent = about;\r\n}\r\n\r\neditProfileForm.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  formEditButton.textContent = \"Сохраняем...\";\r\n\r\n  const updatedProfile = {\r\n    name: nameInput.value,\r\n    about: descriptionInput.value,\r\n  };\r\n\r\n  api\r\n    .updateUserInfo(updatedProfile.name, updatedProfile.about)\r\n    .then(() => {\r\n      updateProfile(updatedProfile);\r\n      closeModal(editPopup);\r\n      editProfileForm.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при обновлении профиля:\", err);\r\n    })\r\n    .finally(() => {\r\n      formEditButton.textContent = \"Сохранить\";\r\n    });\r\n});\r\n"],"names":["openModal","modal","classList","add","document","addEventListener","handleEscapeKey","closeModal","remove","event","key","querySelectorAll","forEach","popup","baseUrl","concat","request","path","body","arguments","length","undefined","options","_objectSpread","method","headers","authorization","JSON","stringify","fetch","then","res","ok","json","err","error","Error","status","details","cardElementToDelete","confirmDeleteCardPopup","querySelector","confirmDeleteButton","createCard","data","handleLike","handleDelete","handleImageClick","userId","cardElement","getElementById","content","cloneNode","imgElement","titleElement","deleteButton","likeElement","likeCount","textContent","likes","src","link","alt","name","dataset","id","_id","some","like","owner","style","display","handleLikeButtonClick","cardId","target","closest","contains","api","updatedCard","catch","console","handleDeleteCard","toggleInputError","formElement","inputElement","errorMessage","errorElement","hideInputError","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","clearValidation","validationConfig","Array","from","inputSelector","forms","preventDefault","finally","placesContainer","addCardPopup","editPopup","changeAvatarPopup","cardPopup","popupImage","popupCaption","modals","addButton","editButton","formEditButton","avatar","changeAvatarButton","createCardButton","changeAvatarForm","editProfileForm","newPlaceForm","placeNameInput","elements","linkInput","nameInput","descriptionInput","avatarLinkInput","profileTitle","profileDescription","Promise","all","_ref","_ref2","userInfo","cards","backgroundImage","updateProfile","about","card","createCardPopup","appendChild","avatarLink","newAvatarLink","value","formSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","imageSrc","title","handleModalClose","evt","pattern","RegExp","test","showInputError","validationMessage","checkInputValidity","setEventListeners","reset","newCard","prepend","updatedProfile"],"sourceRoot":""}