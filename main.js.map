{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/scripts/index.js"],"sourcesContent":["const cohortId = \"wff-cohort-37\";\r\nconst token = \"fde443f4-e1c0-4be8-9027-f230183aa3f5\";\r\nconst baseUrl = `https://nomoreparties.co/v1/${cohortId}`;\r\n\r\nfunction request(path, method = \"GET\", body = null) {\r\n  const headers = {\r\n    authorization: token,\r\n    \"Content-Type\": \"application/json\",\r\n  };\r\n\r\n  const options = {\r\n    method,\r\n    headers,\r\n    ...(body && { body: JSON.stringify(body) }),\r\n  };\r\n\r\n  return fetch(`${baseUrl}/${path}`, options).then((res) => {\r\n    if (!res.ok) {\r\n      return res.json().then((err) => {\r\n        const error = new Error(`Ошибка ${res.status}`);\r\n        error.details = err;\r\n        throw error;\r\n      });\r\n    }\r\n    return res.json();\r\n  });\r\n}\r\n\r\nexport function getUserInfo() {\r\n  return request(\"users/me\");\r\n}\r\n\r\nexport function getCards() {\r\n  return request(\"cards\");\r\n}\r\n\r\nexport function addCard(name, link) {\r\n  return request(\"cards\", \"POST\", { name, link });\r\n}\r\n\r\nexport function deleteCard(cardId) {\r\n  return request(`cards/${cardId}`, \"DELETE\");\r\n}\r\n\r\nexport function likeCard(cardId) {\r\n  return request(`cards/likes/${cardId}`, \"PUT\");\r\n}\r\n\r\nexport function unlikeCard(cardId) {\r\n  return request(`cards/likes/${cardId}`, \"DELETE\");\r\n}\r\n\r\nexport function updateUserInfo(name, about) {\r\n  return request(\"users/me\", \"PATCH\", { name, about });\r\n}\r\n\r\nexport function updateUserAvatar(avatarLink) {\r\n  return request(\"users/me/avatar\", \"PATCH\", { avatar: avatarLink });\r\n}\r\n\r\nexport function loadUserDataAndCards() {\r\n  return Promise.all([getUserInfo(), getCards()]).then(([userInfo, cards]) => {\r\n    return { userInfo, cards };\r\n  });\r\n}\r\n","import * as api from \"./api\";\r\n\r\nexport function createCard(\r\n  data,\r\n  handleLike,\r\n  handleDelete,\r\n  handleImageClick,\r\n  userId\r\n) {\r\n  const cardTemplate = document.getElementById(\"card-template\").content;\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const imgElement = cardElement.querySelector(\".card__image\");\r\n  const titleElement = cardElement.querySelector(\".card__title\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const likeElement = cardElement.querySelector(\".card__like-button\");\r\n  const likeCount = cardElement.querySelector(\".like-count-text\");\r\n\r\n  likeCount.textContent = data.likes.length;\r\n\r\n  imgElement.src = data.link;\r\n  imgElement.alt = data.name;\r\n  titleElement.textContent = data.name;\r\n  cardElement.dataset.id = data._id;\r\n\r\n  if (data.likes.some((like) => like._id === userId)) {\r\n    likeElement.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  if (data.owner._id !== userId) {\r\n    deleteButton.style.display = \"none\";\r\n  } else {\r\n    deleteButton.style.display = \"block\";\r\n  }\r\n\r\n  imgElement.addEventListener(\"click\", () =>\r\n    handleImageClick(data.link, data.name)\r\n  );\r\n\r\n  deleteButton.addEventListener(\"click\", () => {\r\n    handleDelete(cardElement);\r\n  });\r\n\r\n  likeElement.addEventListener(\"click\", (event) =>\r\n    handleLike(event, likeCount, data.likes.length)\r\n  );\r\n\r\n  return cardElement;\r\n}\r\n\r\nexport function handleLikeButtonClick(event, likeCount) {\r\n  const cardId = event.target.closest(\".places__item\").dataset.id;\r\n  const isLiked = event.target.classList.contains(\r\n    \"card__like-button_is-active\"\r\n  );\r\n\r\n  if (isLiked) {\r\n    api\r\n      .unlikeCard(cardId)\r\n      .then((updatedCard) => {\r\n        event.target.classList.remove(\"card__like-button_is-active\");\r\n        likeCount.textContent = updatedCard.likes.length;\r\n      })\r\n      .catch((err) => console.error(\"Ошибка при удалении лайка:\", err));\r\n  } else {\r\n    api\r\n      .likeCard(cardId)\r\n      .then((updatedCard) => {\r\n        event.target.classList.add(\"card__like-button_is-active\");\r\n        likeCount.textContent = updatedCard.likes.length;\r\n      })\r\n      .catch((err) => console.error(\"Ошибка при добавлении лайка:\", err));\r\n  }\r\n}\r\n","export function openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", handleEscapeKey);\r\n}\r\n\r\nexport function closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", handleEscapeKey);\r\n}\r\n\r\nfunction handleEscapeKey(event) {\r\n  if (event.key === \"Escape\") {\r\n    const openPopups = document.querySelectorAll(\".popup_is-opened\");\r\n    openPopups.forEach((popup) => closeModal(popup));\r\n  }\r\n}\r\n\r\nexport function handleModalClose(event) {\r\n  const popup = event.target.closest(\".popup\");\r\n  if (\r\n    popup &&\r\n    (event.target.classList.contains(\"popup__close\") || event.target === popup)\r\n  ) {\r\n    closeModal(popup);\r\n  }\r\n}\r\n","function toggleInputError(formElement, inputElement, errorMessage = \"\") {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  if (errorMessage) {\r\n    inputElement.classList.add(\"form__input_type_error\");\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add(\"form__input-error_active\");\r\n  } else {\r\n    inputElement.classList.remove(\"form__input_type_error\");\r\n    errorElement.classList.remove(\"form__input-error_active\");\r\n    errorElement.textContent = \"\";\r\n  }\r\n}\r\n\r\nexport function showInputError(formElement, inputElement, errorMessage) {\r\n  toggleInputError(formElement, inputElement, errorMessage);\r\n}\r\n\r\nexport function hideInputError(formElement, inputElement) {\r\n  toggleInputError(formElement, inputElement);\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n}\r\n\r\nexport function toggleButtonState(inputList, buttonElement) {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.classList.add(\"button_inactive\");\r\n    buttonElement.setAttribute(\"disabled\", true);\r\n  } else {\r\n    buttonElement.classList.remove(\"button_inactive\");\r\n    buttonElement.removeAttribute(\"disabled\");\r\n  }\r\n}\r\n\r\nexport function clearValidation(formElement, validationConfig) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(validationConfig.inputSelector)\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement);\r\n  });\r\n}\r\n\r\nfunction checkInputValidity(formElement, inputElement) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n\r\n  const isValid =\r\n    inputElement.validity.valid &&\r\n    (!inputElement.pattern ||\r\n      new RegExp(inputElement.pattern).test(inputElement.value));\r\n\r\n  if (!isValid) {\r\n    const errorMessage =\r\n      inputElement.validationMessage || inputElement.dataset.errorMessage;\r\n    showInputError(formElement, inputElement, errorMessage);\r\n  } else {\r\n    hideInputError(formElement, inputElement);\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement) {\r\n  const inputList = Array.from(formElement.querySelectorAll(\".popup__input\"));\r\n  const buttonElement = formElement.querySelector(\".popup__button\");\r\n  toggleButtonState(inputList, buttonElement);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", function () {\r\n      checkInputValidity(formElement, inputElement);\r\n      toggleButtonState(inputList, buttonElement);\r\n    });\r\n  });\r\n}\r\n\r\nexport function enableValidation() {\r\n  const formList = Array.from(document.querySelectorAll(\".popup__form\"));\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement);\r\n  });\r\n}\r\n","import \"../pages/index.css\";\r\nimport { createCard, handleLikeButtonClick } from \"../components/card\";\r\nimport { openModal, closeModal, handleModalClose } from \"../components/modal\";\r\nimport { enableValidation, clearValidation } from \"../components/validation\";\r\nimport * as api from \"../components/api.js\";\r\n\r\nconst placesContainer = document.querySelector(\".places__list\");\r\nconst addCardPopup = document.querySelector(\".popup_type_new-card\");\r\nconst editPopup = document.querySelector(\".popup_type_edit\");\r\nconst changeAvatarPopup = document.querySelector(\".popup_type_avatar\");\r\nconst cardPopup = document.querySelector(\".popup_type_image\");\r\nconst confirmDeleteCardPopup = document.querySelector(\r\n  \".popup_type_delete-card\"\r\n);\r\nconst popupImage = cardPopup.querySelector(\".popup__image\");\r\nconst popupCaption = cardPopup.querySelector(\".popup__caption\");\r\nconst modals = document.querySelectorAll(\".popup\");\r\n\r\nconst addButton = document.querySelector(\".profile__add-button\");\r\nconst editButton = document.querySelector(\".profile__edit-button\");\r\nconst formEditButton = editPopup.querySelector(\".popup__button\");\r\nconst avatar = document.querySelector(\".profile__image\");\r\nconst changeAvatarButton = changeAvatarPopup.querySelector(\".popup__button\");\r\nconst createCardButton = addCardPopup.querySelector(\".popup__button\");\r\nconst confirmDeleteButton =\r\n  confirmDeleteCardPopup.querySelector(\".popup__button\");\r\n\r\nconst changeAvatarForm = document.forms[\"avatar\"];\r\nconst avatarLinkInput = changeAvatarForm.elements[\"avatar-link\"];\r\nconst editProfileForm = document.forms[\"edit-profile\"];\r\nconst newPlaceForm = document.forms[\"new-place\"];\r\nconst confirmDeleteForm = document.forms[\"delete-form\"];\r\nconst placeNameInput = newPlaceForm.elements[\"place-name\"];\r\nconst linkInput = newPlaceForm.elements[\"link\"];\r\nconst nameInput = editProfileForm.elements[\"name\"];\r\nconst descriptionInput = editProfileForm.elements[\"about\"];\r\n\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nlet cardElementToDelete;\r\n\r\nconfirmDeleteForm.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  if (cardElementToDelete) {\r\n    confirmDeleteButton.textContent = \"Удаляем...\";\r\n    const cardId = cardElementToDelete.dataset.id;\r\n    api\r\n      .deleteCard(cardId)\r\n      .then(() => {\r\n        cardElementToDelete.remove();\r\n        cardElementToDelete = null;\r\n        confirmDeleteCardPopup.classList.remove(\"popup_is-opened\");\r\n      })\r\n      .catch((err) => console.error(\"Ошибка при удалении карточки:\", err))\r\n      .finally(() => {\r\n        confirmDeleteButton.textContent = \"Да\";\r\n      });\r\n  }\r\n});\r\n\r\nfunction handleDelete(cardElement) {\r\n  cardElementToDelete = cardElement;\r\n  openModal(confirmDeleteCardPopup);\r\n}\r\n\r\napi\r\n  .loadUserDataAndCards()\r\n  .then(({ userInfo, cards }) => {\r\n    avatar.style.backgroundImage = `url(${userInfo.avatar})`;\r\n\r\n    updateProfile({ name: userInfo.name, about: userInfo.about });\r\n\r\n    cards.forEach((card) => {\r\n      const cardElement = createCard(\r\n        card,\r\n        handleLikeButtonClick,\r\n        handleDelete,\r\n        createCardPopup,\r\n        userInfo._id\r\n      );\r\n      renderCard(cardElement);\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.error(\"Ошибка при загрузке карточек:\", err);\r\n  });\r\n\r\nchangeAvatarForm.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  changeAvatarButton.textContent = \"Сохраняем...\";\r\n  const newAvatarLink = avatarLinkInput.value;\r\n  api\r\n    .updateUserAvatar(newAvatarLink)\r\n    .then(() => {\r\n      avatar.style.backgroundImage = `url(${newAvatarLink})`;\r\n      closeModal(changeAvatarPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при обновлении аватара:\", err);\r\n    })\r\n    .finally(() => {\r\n      changeAvatarButton.textContent = \"Сохранить\";\r\n    });\r\n});\r\n\r\navatar.addEventListener(\"click\", () => {\r\n  avatarLinkInput.value = \"\";\r\n  clearValidation(changeAvatarForm, validationConfig);\r\n  openModal(changeAvatarPopup);\r\n});\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nenableValidation(validationConfig);\r\n\r\nmodals.forEach((modal) => {\r\n  modal.classList.add(\"popup_is-animated\");\r\n  modal.addEventListener(\"click\", handleModalClose);\r\n});\r\n\r\nfunction createCardPopup(imageSrc, title) {\r\n  popupImage.src = imageSrc;\r\n  popupImage.alt = title;\r\n  popupCaption.textContent = title;\r\n  openModal(cardPopup);\r\n}\r\n\r\nfunction renderCard(cardElement) {\r\n  placesContainer.appendChild(cardElement);\r\n}\r\n\r\naddButton.addEventListener(\"click\", () => {\r\n  newPlaceForm.reset();\r\n  clearValidation(newPlaceForm, validationConfig);\r\n  openModal(addCardPopup);\r\n});\r\n\r\nnewPlaceForm.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  createCardButton.textContent = \"Сохраняем...\";\r\n  const newCard = {\r\n    name: placeNameInput.value,\r\n    link: linkInput.value,\r\n  };\r\n\r\n  api\r\n    .addCard(newCard.name, newCard.link)\r\n    .then((card) => {\r\n      const cardElement = createCard(\r\n        card,\r\n        handleLikeButtonClick,\r\n        handleDelete,\r\n        createCardPopup,\r\n        card.owner._id\r\n      );\r\n      placesContainer.prepend(cardElement);\r\n      closeModal(addCardPopup);\r\n      newPlaceForm.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при добавлении карточки:\", err);\r\n    })\r\n    .finally(() => {\r\n      createCardButton.textContent = \"Сохранить\";\r\n    });\r\n});\r\n\r\neditButton.addEventListener(\"click\", () => {\r\n  nameInput.value = profileTitle.textContent;\r\n  descriptionInput.value = profileDescription.textContent;\r\n  clearValidation(editProfileForm, validationConfig);\r\n  openModal(editPopup);\r\n});\r\n\r\nfunction updateProfile({ name, about }) {\r\n  profileTitle.textContent = name;\r\n  profileDescription.textContent = about;\r\n}\r\n\r\neditProfileForm.addEventListener(\"submit\", (event) => {\r\n  event.preventDefault();\r\n  formEditButton.textContent = \"Сохраняем...\";\r\n\r\n  const updatedProfile = {\r\n    name: nameInput.value,\r\n    about: descriptionInput.value,\r\n  };\r\n\r\n  api\r\n    .updateUserInfo(updatedProfile.name, updatedProfile.about)\r\n    .then(() => {\r\n      updateProfile(updatedProfile);\r\n      closeModal(editPopup);\r\n      editProfileForm.reset();\r\n    })\r\n    .catch((err) => {\r\n      console.error(\"Ошибка при обновлении профиля:\", err);\r\n    })\r\n    .finally(() => {\r\n      formEditButton.textContent = \"Сохранить\";\r\n    });\r\n});\r\n"],"names":["baseUrl","concat","request","path","body","arguments","length","undefined","options","_objectSpread","method","headers","authorization","JSON","stringify","fetch","then","res","ok","json","err","error","Error","status","details","createCard","data","handleLike","handleDelete","handleImageClick","userId","cardElement","document","getElementById","content","querySelector","cloneNode","imgElement","titleElement","deleteButton","likeElement","likeCount","textContent","likes","src","link","alt","name","dataset","id","_id","some","like","classList","add","owner","style","display","addEventListener","event","handleLikeButtonClick","cardId","target","closest","contains","api","updatedCard","remove","catch","console","openModal","modal","handleEscapeKey","closeModal","removeEventListener","key","querySelectorAll","forEach","popup","handleModalClose","toggleInputError","formElement","inputElement","errorMessage","errorElement","hideInputError","toggleButtonState","inputList","buttonElement","validity","valid","hasInvalidInput","removeAttribute","setAttribute","clearValidation","validationConfig","Array","from","inputSelector","cardElementToDelete","placesContainer","addCardPopup","editPopup","changeAvatarPopup","cardPopup","confirmDeleteCardPopup","popupImage","popupCaption","modals","addButton","editButton","formEditButton","avatar","changeAvatarButton","createCardButton","confirmDeleteButton","changeAvatarForm","forms","avatarLinkInput","elements","editProfileForm","newPlaceForm","confirmDeleteForm","placeNameInput","linkInput","nameInput","descriptionInput","profileTitle","profileDescription","preventDefault","finally","Promise","all","_ref","_ref2","userInfo","cards","backgroundImage","updateProfile","about","card","createCardPopup","appendChild","avatarLink","newAvatarLink","value","formSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","imageSrc","title","patternMismatch","setCustomValidity","pattern","RegExp","test","showInputError","validationMessage","checkInputValidity","setEventListeners","reset","newCard","prepend","updatedProfile"],"sourceRoot":""}